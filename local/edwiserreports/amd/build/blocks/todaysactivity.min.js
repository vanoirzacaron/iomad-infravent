"use strict";define("local_edwiserreports/blocks/todaysactivity",["jquery","local_edwiserreports/vendor/apexcharts","local_edwiserreports/defaultconfig","local_edwiserreports/common"],function(t,a,o,e){var i="rtl"==t("html").attr("dir")?1:0;return{init:function(r){var c,d=o.getPanel("#todaysactivityblock"),s=o.getPanel("#todaysactivityblock","body"),l=d+" #flatpickrCalender-todaysactivity";function n(i){e.loader.show("#todaysactivityblock"),t.ajax({url:o.requestUrl,type:o.requestType,dataType:o.requestDataType,data:{action:"get_todaysactivity_data_ajax",secret:M.local_edwiserreports.secret,lang:t("html").attr("lang"),data:JSON.stringify({date:i})}}).done(function(e){!0!==e.error||"invalidsecretkey"!==e.exception.errorcode?(t.each(e.data,function(a,o){t(s+" #todays-"+a).find(".data").html(o)}),function(e){o.todaysActivityBlock.graph.data=e,e={labels:o.todaysActivityBlock.graph.labels,datasets:[{label:o.todaysActivityBlock.graph.labelName,data:o.todaysActivityBlock.graph.data,backgroundColor:o.todaysActivityBlock.graph.backgroundColor}]};var i={series:[{data:o.todaysActivityBlock.graph.data}],chart:{type:"bar",height:150,toolbar:{show:!1}},plotOptions:{bar:{borderRadius:4,horizontal:!1,colors:{ranges:[{from:0,to:100}]}}},grid:{show:!1},dataLabels:{enabled:!1},yaxis:{show:!1},tooltip:{theme:"dark",custom:function(t){var a=t.series,o=t.seriesIndex,e=t.dataPointIndex,i=t.w;return'<div class="text-center p-1">'+i.config.xaxis.categories[e]+"<br>"+a[o][e]+"</div>"}},xaxis:{categories:o.todaysActivityBlock.graph.labels},colors:[o.getColorTheme()[2]]};c&&c.destroy(),(c=new a(t("#apex-chart-todays-activity").get(0),i)).render()}(e.data.visitshour)):r("todaysactivityblock",e)}).fail(function(t){}).always(function(){e.loader.hide("#todaysactivityblock")})}t(document).ready(function(){o.todaysActivityBlock=o.getTodaysActivityBlock(),o.todaysActivityBlock&&(n(),t(l).flatpickr({dateFormat:i?"Y M d":"d M Y",maxDate:"today",defaultDate:["today"],onChange:function(t,a,o){n(a)}}))})}}});
//# sourceMappingURL=todaysactivity.min.js.map
