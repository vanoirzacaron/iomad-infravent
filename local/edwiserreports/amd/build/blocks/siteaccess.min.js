"use strict";define("local_edwiserreports/blocks/siteaccess",["jquery","local_edwiserreports/vendor/apexcharts","local_edwiserreports/common","local_edwiserreports/defaultconfig","local_edwiserreports/events"],function(e,t,s,r,o){var a={PANEL:"#siteaccessblock",GRAPH:"#apex-chart-siteaccess-block",SHADES:".siteaccess-values-shade .shades"},i="siteaccessblock",c={GET_VISITSONSITE:function(){return e.ajax({url:r.requestUrl,type:r.requestType,dataType:r.requestDataType,data:{action:"get_siteaccess_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang")}})}},n=null,l={series:[],chart:{id:"siteaccess",height:500,type:"heatmap",toolbar:{show:!1}},stroke:{show:!0,curve:"smooth",colors:["rgba(0, 0, 0, 0.2)"],width:1},xaxis:{categories:[M.util.get_string("week_0","local_edwiserreports"),M.util.get_string("week_1","local_edwiserreports"),M.util.get_string("week_2","local_edwiserreports"),M.util.get_string("week_3","local_edwiserreports"),M.util.get_string("week_4","local_edwiserreports"),M.util.get_string("week_5","local_edwiserreports"),M.util.get_string("week_6","local_edwiserreports")]},dataLabels:{enabled:!1},colors:[r.getColorTheme()[2]]};function d(r){s.loader.show(a.PANEL),c.GET_VISITSONSITE().done(function(o){if(!0!==o.error||"invalidsecretkey"!==o.exception.errorcode){var i=Object.assign({},l);i.series=o.data.siteaccess.reverse(),function(e,r){null!==n&&n.destroy(),(n=new t(e.get(0),r)).render(),setTimeout(function(){s.loader.hide(a.PANEL)},1e3)}(e(a.PANEL).find(a.GRAPH),i)}else r("siteaccessblock",o)}).fail(function(e){s.loader.hide(a.PANEL)})}return{init:function(t){e(a.PANEL).length&&(d(t),function(){for(var t=0,s=1;s<=15;s++)e(a.SHADES).append('<div class="shade" style="opacity: '.concat(t,';"><div class="shade-inner"></div></div>')),t+=1/14;e(a.SHADES).find(".shade .shade-inner").css("background-color",r.getColorTheme()[2]),e(a.SHADES).find(".shade").css("width",100/15+"%")}(),e(document).on(o.EXPORTGRAPHPDF+"-"+i,function(){var t=e(a.PANEL).find("#apex-chart-siteaccess-block");s.exportGraphPDF(n,!1,t.width(),t.height())}),e(document).on(o.EXPORTGRAPHJPEG+"-"+i,function(){s.exportGraphJPEG(n,!1)}),e(document).on(o.EXPORTGRAPHPNG+"-"+i,function(){s.exportGraphPNG(n,!1)}),e(document).on(o.EXPORTGRAPHSVG+"-"+i,function(){s.exportGraphSVG(n,!1)}))}}});
//# sourceMappingURL=siteaccess.min.js.map
