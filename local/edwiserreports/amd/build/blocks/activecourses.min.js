"use strict";define("local_edwiserreports/blocks/activecourses",["jquery","local_edwiserreports/defaultconfig","local_edwiserreports/common"],function(e,t,r){var o={PANEL:"#activecoursesblock",COHORT:".cohort-select",TABLE:"#activecoursesblock table",FORMFILTER:'#activecoursesblock .download-links [name="filter"]',SEARCH:".table-search-input input",USERS:"#activecoursesblock table a.modal-trigger"},a={cohort:0,dir:e("html").attr("dir")},l=null,n={GET_ACTIVECOURSES:function(r){return e.ajax({url:t.requestUrl,type:t.requestType,dataType:t.requestDataType,data:{action:"get_activecourses_data_ajax",secret:M.local_edwiserreports.secret,lang:e("html").attr("lang"),data:JSON.stringify({filter:r})}})}};function s(){r.loader.show(o.PANEL),n.GET_ACTIVECOURSES(a).done(function(t){null!==l&&l.destroy(),(l=e(o.TABLE).DataTable({responsive:!0,data:t.data,dom:'<"edwiserreports-table"<t><"table-pagination"p>>',aaSorting:[[2,"desc"]],aoColumns:[null,null,{orderSequence:["desc"]},{orderSequence:["desc"]},{orderSequence:["desc"]}],language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nocourses","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:" ",next:" "}},drawCallback:function(){r.stylePaginationButton(this)},columnDefs:[{targets:0,className:"text-left pl-5",orderable:!1},{targets:1,className:"text-left",orderable:!1},{targets:"_all",className:"text-center"}],lengthChange:!1,bInfo:!1})).on("order.dt",function(){l.column(0,{order:"applied"}).nodes().each(function(e,t){var r="";t>=0&&t<=2&&(r="<img class='ml-1' src='"+M.util.image_url("trophy/"+["gold","silver","bronze"][t],"local_edwiserreports")+"'></img>"),e.innerHTML=t+1+r}),e(o.TABLE+" td:not(.bg-secondary)").addClass("bg-white")}).draw()}).fail(function(e){console.log(e)}).always(function(){r.loader.hide(o.PANEL)})}return{init:function(t){0!==e(o.PANEL).length&&(a.dir=e("html").attr("dir"),e(o.FORMFILTER).val(JSON.stringify(a)),e(o.PANEL).find(".singleselect").select2(),s(),e("body").on("change","".concat(o.PANEL," ").concat(o.COHORT),function(){var t=e(this).val();a.cohort=t,e(o.PANEL).find('.download-links input[name="cohortid"]').val(t),s()}),e("body").on("input","".concat(o.PANEL," ").concat(o.SEARCH),function(){l.columns(1).search(e(this).val()).draw()}))}}});
//# sourceMappingURL=activecourses.min.js.map
