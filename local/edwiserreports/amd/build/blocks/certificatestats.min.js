"use strict";define("local_edwiserreports/blocks/certificatestats",["jquery","local_edwiserreports/defaultconfig","local_edwiserreports/common"],function(t,e,a){var o={PANEL:"#certificatesblock",COHORT:".cohort-select",TABLE:"#certificatesblock table",SEARCH:".table-search-input input",USERS:"#certificatesblock table a.modal-trigger",FORMFILTER:'#certificatesblock .download-links [name="filter"]'},r={cohort:0,dir:t("html").attr("dir")},i=null,n={GET_CERTIFICATES:function(a){return t.ajax({url:e.requestUrl,type:e.requestType,dataType:e.requestDataType,data:{action:"get_certificates_data_ajax",secret:M.local_edwiserreports.secret,lang:t("html").attr("lang"),data:JSON.stringify({filter:a})}})}};function l(){a.loader.show(o.PANEL),n.GET_CERTIFICATES(r).done(function(e){null!==i&&i.destroy(),i=t(o.TABLE).DataTable({responsive:!0,data:e.data,dom:'<"edwiserreports-table"<t><"table-pagination"p>>',columns:[{data:"name"},{data:"coursename"},{data:"issued"},{data:"notissued"}],columnDefs:[{targets:[0,1],className:"text-left"},{targets:"_all",className:"text-center"}],language:{info:M.util.get_string("tableinfo","local_edwiserreports"),infoEmpty:M.util.get_string("infoempty","local_edwiserreports"),emptyTable:M.util.get_string("nocertificates","local_edwiserreports"),zeroRecords:M.util.get_string("zerorecords","local_edwiserreports"),paginate:{previous:" ",next:" "}},drawCallback:function(){a.stylePaginationButton(this)},lengthChange:!1,bInfo:!1})}).fail(function(t){console.log(t)}).always(function(){a.loader.hide(o.PANEL)})}return{init:function(e){0!==t(o.PANEL).length&&(t(o.FORMFILTER).val(JSON.stringify(r)),t(o.PANEL).find(".singleselect").select2(),l(),t("body").on("change","".concat(o.PANEL," ").concat(o.COHORT),function(){var e=t(this).val();r.cohort=e,t(o.PANEL).find('.download-links input[name="cohortid"]').val(e),l()}),t("body").on("input","".concat(o.PANEL," ").concat(o.SEARCH),function(){i.columns(0).search(t(this).val()).draw()}))}}});
//# sourceMappingURL=certificatestats.min.js.map
