{"version":3,"sources":["reports/activeusers.js"],"names":["define","$","ModalFactory","ModalEvents","Notification","Fragment","Templates","V","common","SELECTOR","PAGE","COHORT","LENGTH","SEARCH","TABLE","DOWNLOADCOHORTID","DOWNLOADFILTER","FORMFILTER","MODALTRIGGER","DATE","DATEMENU","DATEITEM","DATEPICKER","DATEPICKERINPUT","filter","direction","attr","dataTable","modalTable","flatpickr","createModalOfUsersList","CONTEXTID","document","on","title","action","this","data","modalFilter","ModalRoot","rtl","titleDate","formatDate","Date","eval","M","util","get_string","concat","component","date","create","body","loadFragment","page","cohortid","val","then","modal","getRoot","find","addClass","setTitle","show","hidden","destroy","bodyRendered","ModalTable","hasClass","empty","DataTable","dom","language","info","infoEmpty","emptyTable","zeroRecords","paginate","previous","next","drawCallback","stylePaginationButton","search","value","draw","fail","exception","createDropdownCalendar","mode","altInput","altFormat","dateFormat","maxDate","appendTo","get","onOpen","dropdown","onClose","removeClass","selectedCustomDate","dateAlternate","replace","stringarr","split","startdate","enddate","css","text-align","includes","html","createActiveUsersTable","clear","loader","ajax","url","requestUrl","secret","local_edwiserreports","JSON","stringify","done","response","ActiveUsers","parse","each","dates","idx","activeusers","activeUsers","courseenrolment","enrolments","coursecompletion","completionRate","context","sesskey","cfg","render","js","replaceNode","responsive","order","columnDefs","targets","className","len","column","hide","ex","error","_init","select2","handleSearchInput","text","init","ready"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n/**\n * Site Overview Status Report page.\n *\n * @package     local_edwiserreports\n * @author      Yogesh Shirsath\n * @copyright   2022 wisdmlabs <support@wisdmlabs.com>\n * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n/* eslint-disable no-console */\ndefine('local_edwiserreports/reports/activeusers', [\n    'jquery',\n    'core/modal_factory',\n    'core/modal_events',\n    'core/notification',\n    'core/fragment',\n    'core/templates',\n    'local_edwiserreports/variables',\n    'local_edwiserreports/common',\n    'local_edwiserreports/jquery.dataTables',\n    'local_edwiserreports/dataTables.bootstrap4',\n    'local_edwiserreports/flatpickr'\n], function($, ModalFactory, ModalEvents, Notification, Fragment, Templates, V, common) {\n\n    /**\n     * Selector list.\n     */\n    var SELECTOR = {\n        PAGE: '#activeusers',\n        COHORT: \".cohort-select\",\n        LENGTH: \".length-select\",\n        SEARCH: \".table-search-input input\",\n        TABLE: \"#activeusers .table\",\n        DOWNLOADCOHORTID: \".download-links input[name='cohortid']\",\n        DOWNLOADFILTER: \".download-links input[name='filter']\",\n        FORMFILTER: \"#activeusers .download-links input[name='filter']\",\n        MODALTRIGGER: \"#activeusers .table a\",\n        DATE: '.edwiserreports-calendar',\n        DATEMENU: '.edwiserreports-calendar + .dropdown-menu',\n        DATEITEM: '.edwiserreports-calendar + .dropdown-menu .dropdown-item',\n        DATEPICKER: '.edwiserreports-calendar + .dropdown-menu .dropdown-calendar',\n        DATEPICKERINPUT: '.edwiserreports-calendar + .dropdown-menu .flatpickr'\n    };\n\n    /**\n     * Filter\n     */\n    var filter = 'last7days';\n    // var filter = {\n    //     daterange: 'last7days',\n    //     dir: $('html').attr('dir')\n    // };\n\n    /**\n     * Datatable object.\n     */\n    var direction = $('html').attr('dir');\n\n    /**\n     * Datatable object.\n     */\n    var dataTable = null;\n\n    /**\n     * Modal table object.\n     */\n    var modalTable = null;\n\n    /**\n     * Flat picker object.\n     */\n    var flatpickr = null;\n\n    /**\n     * Create modal of Users list\n     * @param {number} CONTEXTID Context id\n     */\n    function createModalOfUsersList(CONTEXTID) {\n        $(document).on('click', SELECTOR.MODALTRIGGER, function() {\n            var title = \"\";\n            var action = $(this).data(\"action\");\n            var modalFilter = $(this).data(\"filter\");\n            var ModalRoot = null;\n            var rtl = $('html').attr('dir') == 'rtl' ? 1 : 0;\n\n\n            // eslint-disable-next-line no-eval\n            var titleDate = rtl ? common.formatDate(new Date(eval(modalFilter * 86400 * 1000)), \"yyyy MMM d\") : common.formatDate(new Date(eval(modalFilter * 86400 * 1000)), \"d MMM yyyy\");\n            title = M.util.get_string(`${action}modaltitle`, V.component, {\n                \"date\": titleDate\n            });\n\n            ModalFactory.create({\n                body: Fragment.loadFragment(\n                    'local_edwiserreports',\n                    'userslist',\n                    CONTEXTID, {\n                        page: 'activeusers',\n                        filter: modalFilter,\n                        cohortid: $(SELECTOR.COHORT).val(),\n                        action: action\n                    }\n                )\n            }).then(function(modal) {\n                ModalRoot = modal.getRoot();\n                ModalRoot.find('.modal-dialog').addClass('modal-lg');\n                modal.setTitle(title);\n                modal.show();\n                ModalRoot.on(ModalEvents.hidden, function() {\n                    modal.destroy();\n                });\n\n                ModalRoot.on(ModalEvents.bodyRendered, function() {\n                    var ModalTable = ModalRoot.find(\".modal-table\");\n\n                    // If empty then remove colspan\n                    if (ModalTable.find(\"tbody\").hasClass(\"empty\")) {\n                        ModalTable.find(\"tbody\").empty();\n                    }\n\n                    // Create dataTable for userslist\n                    modalTable = ModalRoot.find(\".modal-table\").DataTable({\n                        dom: '<\"edwiserreports-table\"<\"p-2\"i><t><\"table-pagination\"p>>',\n                        language: {\n                            info: M.util.get_string('tableinfo', 'local_edwiserreports'),\n                            infoEmpty: M.util.get_string('infoempty', 'local_edwiserreports'),\n                            emptyTable: M.util.get_string('nousers', 'local_edwiserreports'),\n                            zeroRecords: M.util.get_string('zerorecords', 'local_edwiserreports'),\n                            paginate: {\n                                previous: \" \",\n                                next: \" \"\n                            }\n                        },\n                        drawCallback: function() {\n                            common.stylePaginationButton(this);\n                        }\n                    });\n\n                    ModalRoot.find('.table-search-input input').on('input', function() {\n                        modalTable.search(this.value).draw();\n                    });\n                });\n                return;\n            }).fail(Notification.exception);\n        });\n    }\n\n    /**\n     * Create Calender in dropdown tp select range.\n     */\n    function createDropdownCalendar() {\n        flatpickr = $(SELECTOR.DATEPICKERINPUT).flatpickr({\n            mode: 'range',\n            altInput: true,\n            altFormat: \"d M Y\",\n            dateFormat: \"Y-m-d\",\n            maxDate: \"today\",\n            appendTo: $(SELECTOR.DATEPICKER).get(0),\n            onOpen: function() {\n                $(SELECTOR.DATEMENU).addClass('withcalendar');\n                $(SELECTOR.DATE).dropdown('update');\n            },\n            onClose: function() {\n                $(SELECTOR.DATEMENU).removeClass('withcalendar');\n                selectedCustomDate();\n            }\n        });\n    }\n\n    /**\n     * After Select Custom date get active users details.\n     */\n    function selectedCustomDate() {\n        let date = $(SELECTOR.DATEPICKERINPUT).val(); // Y-m-d format\n        let dateAlternate = $(SELECTOR.DATEPICKERINPUT).next().val().replace(\"to\", \"-\"); // d M Y format\n\n        // RTL support\n        // Split string in 2 parts\n        let stringarr = dateAlternate.split('-');\n        // Formating date for rtl\n        if(direction == 'rtl'){\n            // format for rtl : yyyy mm dd\n            let startdate = stringarr[0].split(' ');\n            let enddate = stringarr[1].split(' ');\n\n            startdate = startdate[2] + ' ' + startdate[1] + ' ' + startdate[0];\n            enddate = enddate[3] + ' ' + enddate[2] + ' ' + enddate[1];\n            dateAlternate = enddate + '-' + startdate;\n\n            // Making direction ltr for date selector and aligning text to right\n            $(SELECTOR.DATE).css({'direction':'ltr','text-align': 'right'});\n            $(SELECTOR.DATEPICKERINPUT).css({'direction':'ltr','text-align': 'right'});\n        }\n\n\n        $(SELECTOR.DATEPICKERINPUT).next().val(dateAlternate);\n\n        /* If correct date is not selected then return false */\n        if (!date.includes(\" to \")) {\n            flatpickr.clear();\n            return;\n        }\n\n        // Set active class to custom date selector item.\n        $(SELECTOR.DATEITEM).removeClass('active');\n        $(SELECTOR.DATEITEM + '.custom').addClass('active');\n\n        // Show custom date to dropdown button.\n        $(SELECTOR.DATE).html(dateAlternate);\n\n        filter = date;\n\n        // Hide dropdown.\n        $(SELECTOR.DATEMENU).removeClass('show');\n        createActiveUsersTable();\n    }\n\n    /**\n     * Create Active Users Table.\n     */\n    function createActiveUsersTable() {\n        $(SELECTOR.FORMFILTER).val(filter);\n        // $(SELECTOR.FORMFILTER).val(JSON.stringify(filter));\n        $(SELECTOR.DOWNLOADCOHORTID).val($(SELECTOR.COHORT).val());\n\n        // Show loader.\n        common.loader.show(\"#activeusers\");\n\n        $.ajax({\n            url: V.requestUrl,\n            data: {\n                action: 'get_activeusers_graph_data_ajax',\n                secret: M.local_edwiserreports.secret,\n                data: JSON.stringify({\n                    filter: filter,\n                    cohortid: $(SELECTOR.COHORT).val()\n                })\n            },\n        }).done(function(response) {\n            var ActiveUsers = [];\n            response = JSON.parse(response);\n            var rtl = $('html').attr('dir') == 'rtl' ? 1 : 0;\n\n            $.each(response.dates, function(idx, val) {\n                ActiveUsers[idx] = {\n                    date: rtl ? '<div style=\"direction:ltr;\">' + common.formatDate(new Date(eval(val * 86400 * 1000)), \"yyyy MMM d\") + '</div>' : common.formatDate(new Date(eval(val * 86400 * 1000)), \"d MMM yyyy\"),\n                    filter: response.dates[idx],\n                    activeusers: response.data.activeUsers[idx],\n                    courseenrolment: response.data.enrolments[idx],\n                    coursecompletion: response.data.completionRate[idx]\n                };\n            });\n\n            var context = {\n                activeusers: ActiveUsers,\n                sesskey: M.cfg.sesskey\n            };\n\n            // eslint-disable-next-line promise/catch-or-return\n            Templates.render('local_edwiserreports/activeuserstable', context)\n                .then(function(html, js) {\n                    /* If datatable is already created then destroy the table */\n                    if (dataTable) {\n                        dataTable.destroy();\n                    }\n                    Templates.replaceNode(SELECTOR.TABLE, html, js);\n                    dataTable = $(SELECTOR.TABLE).DataTable({\n                        responsive: true,\n                        dom: '<\"edwiserreports-table\"<\"p-2\"i><t><\"table-pagination\"p>>',\n                        order: [\n                            [0, 'desc']\n                        ],\n                        language: {\n                            info: M.util.get_string('tableinfo', 'local_edwiserreports'),\n                            infoEmpty: M.util.get_string('infoempty', 'local_edwiserreports'),\n                            emptyTable: M.util.get_string('noactiveusers', 'local_edwiserreports'),\n                            zeroRecords: M.util.get_string('zerorecords', 'local_edwiserreports'),\n                            paginate: {\n                                previous: \" \",\n                                next: \" \"\n                            }\n                        },\n                        columnDefs: [{\n                                \"targets\": 0,\n                                \"className\": \"text-left\"\n                            },\n                            {\n                                \"targets\": \"_all\",\n                                \"className\": \"text-center\",\n                            }\n                        ],\n                        drawCallback: function() {\n                            common.stylePaginationButton(this);\n                        }\n                    });\n                    dataTable.page.len($(SELECTOR.LENGTH).val());\n                    dataTable.column(0).search($(SELECTOR.SEARCH).val()).draw();\n\n                    // Hide loader.\n                    common.loader.hide(\"#activeusers\");\n                }).fail(function(ex) {\n                    Notification.exception(ex);\n\n                    // Hide loader.\n                    common.loader.hide(\"#activeusers\");\n                });\n        }).fail(function(error) {\n            Notification.exception(error);\n            // Hide loader.\n            common.loader.hide(\"#activeusers\");\n        });\n    }\n\n    /**\n     * Initialize\n     * @param {integer} CONTEXTID Current page context id\n     */\n    function init(CONTEXTID) {\n\n        // Initialize select2.\n        $(SELECTOR.PAGE).find('.singleselect').select2();\n\n        // Handle table search highlight.\n        common.handleSearchInput();\n\n        /* Select filter for active users block */\n        $(SELECTOR.DATEITEM + \":not(.custom)\").on('click', function() {\n            filter = $(this).data('value');\n\n            // Set custom selected item as active.\n            $(SELECTOR.DATEITEM).removeClass('active');\n            $(this).addClass('active');\n\n            // Show selected item on dropdown button.\n            $(SELECTOR.DATE).html($(this).text());\n\n            // Hide dropdown.\n            $(SELECTOR.DATEMENU).removeClass('show');\n\n            // Clear custom date.\n            flatpickr.clear();\n            createActiveUsersTable();\n        });\n\n        // Cohort filter.\n        $(SELECTOR.COHORT).on('change', function() {\n            createActiveUsersTable();\n        });\n\n        // Observer length change.\n        $(SELECTOR.LENGTH).on('change', function() {\n            dataTable.page.len(this.value).draw();\n        });\n\n        // Search in table.\n        $(SELECTOR.SEARCH).on('input', function() {\n            dataTable.column(0).search(this.value).draw();\n        });\n\n        createActiveUsersTable();\n        createModalOfUsersList(CONTEXTID);\n        createDropdownCalendar();\n    }\n\n    return {\n        init: function(CONTEXTID) {\n            $(document).ready(function() {\n                init(CONTEXTID);\n            });\n        }\n    };\n\n});\n"],"file":"activeusers.min.js"}
